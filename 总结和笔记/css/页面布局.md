---
layout: post
title: 页面布局
date: 2017/8/8
categories: 前端
---


>多栏布局有三种基本的实现方案：固定宽度、流动、弹性。

>+ 固定宽度布局的大小不会随用户调整浏览器窗口大小而变化，一般是 900 到 1100像素宽。其中 960 像素是最常见的，因为这个宽度适合所有现代显示器，而且能够被 16、 12、 10、 8、 6、 5、 4 和 3 整除，不仅容易计算等宽分栏的数量，而且计算结果也能得到没有小数的像素数。

>+ 流动布局的大小会随用户调整浏览器窗口大小而变化。这种布局能够更好地适应大屏幕，但同时也意味着放弃对页面某些方面的控制，比如随着页面宽度变化，文本行的长度和页面元素之间的位置关系都可能变化。 Amazon.com 的页面采用的就是流动中栏布局，在各栏宽度加大时通过为内容元素周围添加空白来保持内容居中，而且现在的导航条会在布局变窄到某个宽度时收缩进一个下拉菜单中，从而为内容腾出空间。今天，越来越多的浏览器都支持 CSS 媒体查询了。这就让基于浏览器窗口宽度提供不同的 CSS 样式成为可能。在这种形势下，适应各种屏幕宽度的可变固定布局，正逐步取代流动布局。这种可变的固定布局能够适应最大和最小的屏幕，称之为响应式设计。

#### 三栏-固定宽度布局

这个布局是中间部分是固定不动的

 首先先来一个单栏，居中放置
 
 ```xml
 <div id="wrapper">
<article>
<! -- 这里是一些文本元素 -->
</article>
</div>
 ```
 
 布局相关的 CSS 如下：
 
 ```css
#wrapper {width:960px; margin:0 auto; border:1px solid;} /*水平设置为auto可以居中*/
article {background:#ffed53;}
```

在这个基础上，进行二栏扩充

```xml
<div id="wrapper">
<nav>
<!-- 无序列表 -->
</nav>
<article>
<! -- 文本 -->
</article>
</div>
```

浮动作为两栏的容器元素，让它们并排显示

```css
#wrapper {width:960px; margin:0 auto; border:1px solid;}
nav {
width:150px;
float:left;
}
nav li {
/*去掉列表项目符号*/
list-style-type:none;
}
article {
width:810px;
float:left;
background:#ffed53;
}
```

继续三栏设计

```xml
<div id="wrapper">
<nav>
<!-- 无序列表 -->
</nav>
<article>
<! -- 文本 -->
</article>
<aside>
<! -- 文本 -->
</aside>
</div>
```

接下来，要调整 article 这一栏的宽度，为第三栏腾出空间。

```css
#wrapper {width:960px; margin:0 auto; border:1px solid;}
nav {
width:150px;
float:left;
background:#dcd9c0;
}
nav li {
list-style-type:none;
}
article {
width:600px;
float:left;
background:#ffed53;
}
aside {
width:210px;
float:left;
background:#3f7ccf;
}
```

就用这种办法，我可以想加多少栏就加多少栏，只要它们的总宽度等于外包装的宽度即可(如960px)。在这个基础上可以设计页眉和页脚，但会发现页脚会位于浮动元素后面而且会向上移动，解决办法是在它的css中添加 clear:both，就可以保证页脚始终都位于最长栏的下方。

接下来，主要解决布局中的两个主要问题。首先，内容与各栏边界紧挨在一起，太拥挤；其次，每栏高度由文本多少决定，而如果每栏都与布局一样高则更好。但是不能直接为元素设置边距值，比如为article设置padding的话，会导致右侧的aside没有浮动空间而被挤下去。这种现象叫做：**浮动滑移”**，解决办法有三种：

+  从设定的元素宽度中减去添加的水平外边距、边框和内边距的宽度和。
+  在容器内部的元素上添加内边距或外边距。
+  使用 CSS3 的 box-sizing 属性切换盒子缩放方式，比如 section {box-sizing:border-box;}。 应用 box-sizing 属性后，给 section 添加边框和内边距都不会增大盒子，相反会导致内容变窄。

第一种方式不是好办法，因为每次调动都需要计算，有时候结果还不一定是个很好的数字；

第二个办法就是为每个单独的区域设置一个内含的div，如果布局中的栏是浮动的，而且都设定了宽度，你就根本不要去动它！要动，就把内容放在内部 div 里，动这个 div。例如：

```xml
<article>
<div class="inner">
<!-- 文本 -->
</div>
</article>
```

然后要设置边距，就通过div来设置

```css
article .inner{
	padding:10px 20px;
}
```

第三个办法就是直接在元素css中添加 box-sizing:border-box声明，再给栏添加内边距（和边框）就不会导致盒子的宽度变化了。此时，既不用调整栏宽去抵消增加的内边距，也不用使用内部 div。添加内边距的结果就是内容收缩。如

```css
article {
box-sizing:border-box;
width:600px;
float:left;
background:#ffed53;
padding:10px 20px;
}
```

但是IE6 和 IE7 不支持 box-sizing属性。不过，有一个专门解决这个问题的腻子脚本（polyfill），名叫 borderBoxModel.js。


#### 三栏-中栏流动布局

**实现中栏流动布局有两种方法。一种是在中栏改变大小时使用负外边距定位右栏，另一种是使用 CSS3 让栏容器具有类似表格单元的行为。负外边距适合比较老的浏览器，而 CSS 的 table 属性则要简单得多。**

###### 用负外边距实现

实现三栏布局且让中栏内容区流动（不固定）的核心问题，就是处理右栏的定位，并在中栏内容区大小改变时控制右栏与布局的关系。解决方案是控制两个外包装（通过 ID 值为 wrapper）容器的外边距。其中一个外包装包围所有三栏，另一个外包装只包围左栏和中栏。

```xml
<div id="main_wrapper">
<header>
<!-- 页眉-->
</header>
<div id="threecolwrap">/*三栏外包装（包围全部三栏） */
<div id="twocolwrap">/*两栏外包装（包围左栏和中栏） */
/*左栏*/
<nav>
<!-- 导航 -->
</nav>
/*中栏*/
<article>
<!-- 区块 -->
</article>
</div>/*结束两栏外包装（ twocolwrap） */
/*右栏*/
<aside>
<!-- 侧栏 -->
</aside>
</div>/*结束三栏外包装（ threecolwrap） */
<footer>
<!-- 页脚 -->
</footer>
</div>
```

```css
* {margin:0; padding:0;}
body {font:1em helvetica, arial, sans-serif;}
div#main_wrapper{
min-width:600px; max-width:1100px;
/*超过最大宽度时，居中布局*/
margin:0 auto;
/*背景图片默认从左上角开始拼接*/
background:url(images/bg_tile_150pxw.png) repeat-y #eee;
}
header {
padding:5px 10px;
background:#3f7ccf;
}
div#threecolwrap {
/*浮动强制它包围浮动的栏*/
float:left;
width:100%;
/*背景图片右对齐*/
background:url(images/bg_tile_210pxw.png) top right repeat-y;
}
div#twocolwrap {
/*浮动强制它包围浮动的栏*/
float:left;
width:100%;
/*把右栏拉到区块外边距腾出的位置上*/
margin-right:-210px;
}
nav {
float:left;
width:150px;
background:#f00;
padding:20px 0;
}
/*让子元素与栏边界保持一定距离*/
nav > * {margin:0 10px;}
article {
width:auto;
margin-left:150px;
/*在流动居中的栏右侧腾出空间*/
margin-right:210px;
background:#eee;
padding:20px 0;
}
/*让子元素与栏边界保持一定距离*/
article > * {margin:0 20px;}
aside {
float:left;
width:210px;
background:#ffed53;
padding:20px 0;
}
/*让子元素与栏边界保持一定距离*/
aside > * {margin:0 10px;}
footer {
clear:both;
width:100%;
text-align:center;
background:#000;
}
```

三栏中的右栏是 210像素宽。为了给右栏腾出空间，中栏 article 元素有一个 210 像素的右外边距。当然，光有这个外边距只能把右栏再向右推 210 像素。别急，包围左栏和中栏的两栏外包装上 210 像素的负右外边距，会把右栏拉回 article 元素右外边距（在两栏外包装内部右侧）创造的空间内。中栏 aticle 元素的宽度是 auto，因此它仍然会力求占据浮动左栏剩余的所有空间。可是，一方面它自己的右外边距在两栏外包装内为右栏腾出了空间，另一方面两栏外包装的负右外边距又把右栏拉到了该空间内。这是个很巧妙的设计.

###### 用CSS3 单元格实现

这种方式仅仅是把三栏的display 属性设定为 table-cell 就可以了。要实现一个三栏-流动中栏布局，只需要以下标记：

```xml
<nav><!-- 内容 --></nav>
<article><!-- 内容 --></article>
<aside><!-- 内容 --></aside>
```

```css
nav {display:table-cell; width:150px; padding:10px;
background:#dcd9c0;}

article {display:table-cell; padding:10px 20px;
background:#ffed53;}

aside {display:table-cell; width:210px; padding:10px;
background:#3f7ccf;}
```

这个流动布局使用了css3的display:table-cell，让每个栏形同单元格一般。 但CSS3 表格行为在 IE7 及更低版本中并没有得到支持，而且也没有稳妥的补救措施。