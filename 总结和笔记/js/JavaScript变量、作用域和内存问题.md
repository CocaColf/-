---
layout: post
title: Js中基本类型和引用类型到底是什么？
date: 2018/03/11
categories: JavaScript
---
&#160;&#160;&#160;&#160;我相信很多人在学js的时候，都和我一样困惑过，`引用`到底是什么鬼哦？以前我还想明白了，但今天在重看高程三的时候，我却又开始不清楚了，于是赶紧弄明白了记下来。
&#160;&#160;&#160;&#160;Js中变量可能包含两个不同数据类型的值：基本数据类型和引用数据类型。基本类型值就是简单的数据段，而引用类型值就是可能由多个值构成的对象。
&#160;&#160;&#160;&#160;先说**结论**：

+ 基本类型变量存储的是值，而复杂类型（引用类型）存储的是内存地址
+ 基本类型在赋值的时候是拷贝值，而引用类型是拷贝地址

&#160;&#160;&#160;&#160;计算机在存储一个整数时，用32位来存储；存储一个浮点数时，用64位来存储，所以不管是一个什么样的数值，它的位数都是可以确定的。但是对象呢？当声明一个对象后，我要向其中加入属性，方法，这些东西的数量是变化的，所以肯定不能像整数这样能够一开始就分配好位数。当然，可以分配一万位，但是这样对于那些只占据了百来位的变量，也太浪费空间了。为了解决这个问题，存储的时候计算机分为了两种内存：堆内存（存储位数不固定的数据）和栈内存（每个数据占位是固定的）。

```js
var a = 2;

var obj = {
    a:1,
    b:2
};
```

当声明了a和obj后，他们都在栈内存中，但是obj里面存储的不是a,b，而是他们的地址，实际的a,b是存在堆内存中的。

&#160;&#160;&#160;&#160;明白了这个之后，基本类型和引用类型就弄得明白了，这个引用就是指地址。

+ **动态属性**

由于基本类型存的是值，位数已经固定了，所以肯定不可能增加属性；而引用类型增加属性的时候，这个属性实际上存在了堆内存中。

+ **复制变量的值**

对于基本类型，

```js
var a = 2;
var b = a;
```

当b被赋值a时，b接收到的是a的值，所以b存储在栈内存的一个位置，a和b是独立的

对于引用类型

```js
var obj1 = new Object();
var obj2 = obj1;

obj2.name = 'xxx';
console.log(obj1.name); // xxx
```

当obj1赋值给obj2时，obj2收到的是一个地址，于是它们两个指向的是同一个（堆内存中）地址，所以导致只要一个发生变化，另一个也会受到牵连。


